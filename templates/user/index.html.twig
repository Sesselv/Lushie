{% extends 'base.html.twig' %} {% block body %}
<section class="sec-dashboard">
    <div class="container">
        <h1>Mon Dashboard !</h1>
        <div class="profile-container">
            <div class="profile">
                {# PHOTO + BOUTON SUPPRIMER #}
                <div class="photo-wrapper">
                    <img
                        src="{{ asset(profilePhotoPath) }}"
                        alt="Photo de profil"
                        class="profile-img"
                    />

                    {% if profilePhotoPath != 'uploads/users/pp.png' %}
                    <form
                        action="{{ path('app_user_delete_photo') }}"
                        method="POST"
                    >
                        <button
                            type="submit"
                            class="delete_photo_overlay"
                            onclick="return confirm('Voulez-vous vraiment supprimer votre photo ?')"
                        >
                            Supprimer
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>

            {# FORMULAIRE DE MISE À JOUR #}
            {{ form_start(form) }}

            {{ form_row(form.username) }}
               {% if profilePhotoPath == 'uploads/users/pp.png' %}
            {{ form_row(form.photo) }}
            {% endif %}


            <button type="submit" class="btn btn-primary">Enregistrer</button>

            {{ form_end(form) }}
        </div>
<div class="profile-links">
    <a href="{{ path('app_user_details', {userId: app.user.id, type: 'articles'}) }}">Mes articles</a>
    <a href="{{ path('app_user_details', {userId: app.user.id, type: 'commentaires'}) }}">Mes commentaires</a>
    <a href="{{ path('app_user_details', {userId: app.user.id, type: 'favorite'}) }}">Mes favoris</a>
    <a href="{{ path('app_user_delete_account') }}" class="delete-account" onclick="return confirm('Êtes-vous sûr de vouloir supprimer définitivement votre compte ? Cette action est irréversible.');">Supprimer mon compte</a>
    <a href="{{ path('app_logout') }}">Se déconnecter</a>
</div>
</section>
{% endblock %}
